[中文](CONTRIBUTING.md) / [English](./docs/CONTRIBUTING_EN.md) / Русский

# Руководство по внесению вклада в ScriptCat

Мы очень благодарны за ваш вклад в развитие ScriptCat! Это руководство призвано помочь вам вносить вклад в ScriptCat более стандартизированным образом, поэтому, пожалуйста, обязательно внимательно его прочитайте.

## Создание Issue

Перед созданием Issue мы рекомендуем сначала проверить [существующие Issues](https://github.com/scriptscat/scriptcat/issues), чтобы избежать дублирования.

### Сообщение о проблемах, сбоях и уязвимостях

ScriptCat — это постоянно развивающийся проект. Если вы столкнетесь с проблемами в процессе использования и уверены, что они вызваны ScriptCat, вы можете создать Issue. При создании, приложите подробные шаги для воспроизведения и информацию о среде выполнения.

### Предложение новых функций

Мы приветствуем ваши предложения по новым функциям в Issues. Чтобы мы лучше поняли ваши потребности, максимально подробно опишите функцию и предложите возможные решения.

## Pull Request

ScriptCat использует [pnpm](https://pnpm.io/) для управления зависимостями проекта. Если у вас уже установлен npm, следующие команды помогут вам быстро настроить среду разработки:

```bash
# Установка зависимостей node.js
pnpm install
```

Мы рекомендуем использовать [прокси](https://pnpm.io/npmrc#https-proxy) для решения сетевых проблем pnpm, а не зеркала.

```bash
pnpm config set proxy http://127.0.0.1:7890
pnpm config set https-proxy https://127.0.0.1:7890
```

### Соглашение по коммитам (Commit)

Мы хотим, чтобы каждый коммит четко описывал свою цель, и каждый коммит по возможности содержал только одно изменение. Наше соглашение по сообщениям коммитов следует [gitmoji](https://gitmoji.dev/). Например:

```bash
git commit -m "✨ add login feature"
```

Этот пример показывает добавление новой функции: входа в систему.

### Обзор рабочего процесса

Ветка `main` является основной веткой ScriptCat. Для сохранения целостности кода, не изменяйте напрямую ветку `main`.
Вам следует создать новую ветку, внести изменения в этой ветке, а затем создать Pull Request с целевой веткой `main`.
Заголовок Pull Request, по возможности пишите на китайском языке для удобства автоматического создания журнала изменений.

Если вы не являетесь участником команды ScriptCat, вы можете сначала сделать fork этого репозитория, а затем создать Pull Request
в ветку `main` этого репозитория. При создании коммитов, следуйте указанному выше соглашению по сообщениям коммитов.
Мы объединим ваш вклад в `main` ветку после проведения code review.

## Написание документации

Документация ScriptCat находится в другом репозитории: [scriptcat.org](https://docs.scriptcat.org), она написана с использованием [docusaurus](https://docusaurus.io/), вот некоторые
особенности [Markdown](https://docusaurus.io/docs/markdown-features), которые могут вам помочь. Если вам нужно предпросмотреть измененную документацию локально,
вы можете использовать следующие команды для установки зависимостей документации и запуска dev сервера:

```bash
pnpm install
pnpm start
```

### Помощь с переводом

[Crowdin](https://crowdin.com/project/scriptcat) — это онлайн-платформа для многозначного перевода. Если вы заинтересованы помочь нам
с переводом контента, связанного с ScriptCat, вы можете найти проект ScriptCat на Crowdin и начать работу по переводу.

- `src/locales` — каталог файлов перевода для [расширения](https://github.com/scriptscat/scriptcat)

#### Включение режима WYSIWYG для расширения

> В новой версии еще не добавлено

#### Включение режима WYSIWYG для хранилища скриптов

Перейдите на страницу хранилища скриптов: [https://scriptcat.org/ach-UG](https://scriptcat.org/ach-UG) чтобы включить режим WYSIWYG (What You See Is What You Get).

## Участие в разработке

ScriptCat использует ESLint для стандартизации стиля кода и Vitest для модульного тестирования. Вы можете использовать следующие команды для запуска:

```bash
pnpm test
pnpm run lint
```

Для разработки страниц ScriptCat используются следующие технологии:

- [React](https://reactjs.org/)
- UI-фреймворк [arco](https://arco.design)
- CSS-фреймворк [unocss](https://unocss.dev/interactive/)
- Инструмент сборки RsPack [rspack](https://rspack.dev/)

Если вы хотите запустить ScriptCat локально, вы можете использовать следующую команду:

```bash
pnpm run dev
# Обратите внимание: по неизвестным причинам, если вам нужно использовать режим инкогнито, используйте следующую команду для разработки
pnpm run dev:noMap
```

Если вы хотите собрать расширение, вы можете использовать следующую команду:

```bash
pnpm run pack
```

Перед сборкой убедитесь, что в каталоге `dist` создан файл `scriptcat.pem`.

## Важные моменты

- После выполнения `pnpm run dev` необходимо импортировать содержимое каталога `dist/ext` в расширение браузера, а затем начать изменять код
и сохранять — браузер будет обновляться в реальном времени. Однако изменения, затрагивающие `manifest.json`, `service_worker`, `offscreen`, `sandbox`, требуют перезагрузки расширения.
